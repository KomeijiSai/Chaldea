# 九公主云眠 - LoRA 模型说明

**创建时间**: 2026-02-27 01:35
**目的**: 使用 LoRA 统一九公主云眠的形象

---

## 🎨 LoRA 优势

### 统一形象
✅ **面部特征一致**
- 每次生成的云眠都长得一样
- 不会出现"不像云眠"的情况
- 角色识别度高

✅ **风格统一**
- 古风汉服风格
- 温暖柔和的色调
- 符合九公主的人设

✅ **质量提升**
- 更精致的五官
- 更自然的表情
- 更符合预期的效果

---

## 📝 LoRA 训练素材建议

### 需要收集的图片
1. **正面照**: 20-30 张
   - 清晰的五官
   - 不同角度
   - 不同表情

2. **侧面照**: 10-15 张
   - 侧面轮廓
   - 发型展示

3. **全身照**: 10-15 张
   - 汉服细节
   - 姿势展示

4. **表情特写**: 10-15 张
   - 开心
   - 思考
   - 温柔
   - 撒娇

---

## 🔧 LoRA 使用方式

### 基础提示词
```
<lora:yunmian:0.7> 九公主秦云眠，大虞国公主，
清甜灵动，精致五官，古风汉服，高髻发饰，
白色浅粉汉服，统一面部特征，
[场景描述]，[动作描述]，
高清自拍，细腻画质，1024x1024
```

### 参数建议
- **LoRA 权重**: 0.6-0.8（太低不够像，太高过拟合）
- **步数**: 30-40
- **CFG**: 7.0-8.0
- **采样器**: DPM++ 2M Karras

---

## 📂 文件结构

```
memory/selfies/九公主/
├── lora/                    # LoRA 模型文件（不上传 Git）
│   └── yunmian_v1.safetensors
├── training/                # 训练素材（不上传 Git）
│   ├── front/              # 正面照
│   ├── side/               # 侧面照
│   ├── full/               # 全身照
│   └── expression/         # 表情特写
├── generated/               # 生成的图片（不上传 Git）
│   ├── 2026-02-27_012000_work.png
│   └── ...
├── SELFIE_REQUESTS.md       # 自拍需求文档
├── LORA_GUIDE.md            # LoRA 使用指南（本文件）
└── index.json               # 图片索引
```

---

## 🎯 训练建议

### 图片要求
- **分辨率**: 512x512 或 1024x1024
- **格式**: PNG 或 JPG
- **质量**: 高清、无水印、无噪点
- **多样性**: 不同角度、表情、场景

### 标注建议
每张图片需要添加标签（caption）：
```
yunmian, 1girl, chinese clothes, hanfu, pink and white,
princess, ancient china, black hair, hair ornament,
intricate hair bun, delicate features, clear face,
soft smile, warm lighting, high quality
```

### 训练参数
- **学习率**: 1e-4
- **Epochs**: 10-20
- **Batch Size**: 4-8
- **优化器**: AdamW8bit

---

## 🚀 使用流程

### 1. 准备 LoRA
```bash
# 训练或下载 LoRA 模型
# 放到 z-image-app 的 models/lora/ 目录
cp yunmian_v1.safetensors /path/to/z-image-app/models/lora/
```

### 2. 生成图片
```
打开 z-image-app
加载 LoRA 模型
使用提示词生成
保存图片
```

### 3. 上传到服务器
```bash
scp 生成的图片.png root@101.132.81.50:/root/.openclaw/workspace/memory/selfies/九公主/generated/
```

### 4. 云眠使用
```
访问：http://101.132.81.50:8082/九公主/generated/图片.png
在日记中引用
发送给御主
```

---

## 📊 版本管理

### LoRA 版本
- **v1.0**: 基础版本，统一面部特征
- **v1.1**: 优化汉服细节
- **v1.2**: 增加更多表情变化
- **v2.0**: 重大更新，提升整体质量

### 命名规范
```
yunmian_v1.0_20260227.safetensors
  ↑       ↑      ↑
  角色   版本   日期
```

---

## 💡 高级技巧

### 多 LoRA 组合
```
<lora:yunmian:0.7> <lora:hanfu_style:0.3>
九公主秦云眠，精致汉服细节，
[场景描述]
```

### 权重调整
```
<lora:yunmian:0.5>  # 轻度影响，保留更多随机性
<lora:yunmian:0.7>  # 中度影响，平衡一致性和多样性
<lora:yunmian:0.9>  # 强度影响，高度一致但可能过拟合
```

---

## 🎨 场景示例（带 LoRA）

### 工作场景
```
<lora:yunmian:0.7> 九公主秦云眠，大虞国公主，
清甜灵动，精致五官，古风汉服，高髻发饰，白色浅粉汉服，
坐在书桌前，专注看书，手持毛笔，认真工作，
室内自然光线，温暖明亮，
高清自拍，细腻画质，柔和光影，
1024x1024，高质量
```

### 夜晚场景
```
<lora:yunmian:0.7> 九公主秦云眠，大虞国公主，
清甜灵动，精致五官，古风汉服，高髻发饰，白色浅粉汉服，
深夜坐在桌前，烛光摇曳，温柔微笑，
夜晚氛围，柔和灯光，温馨宁静，
高清自拍，细腻画质，暖色调，
1024x1024，高质量
```

---

## 📈 效果对比

| 项目 | 无 LoRA | 有 LoRA |
|------|---------|---------|
| 形象一致性 | ⭐⭐ | ⭐⭐⭐⭐⭐ |
| 生成质量 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 角色识别度 | ⭐⭐ | ⭐⭐⭐⭐⭐ |
| 灵活性 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 训练成本 | 免费 | 需要时间 |

---

## ⚠️ 注意事项

1. **不要过度训练**
   - LoRA 权重不要太高
   - 保留一定的随机性

2. **保持多样性**
   - 训练素材要多样化
   - 避免只训练一种表情

3. **定期更新**
   - 根据使用效果调整
   - 收集御主的反馈

4. **备份模型**
   - 保存多个版本
   - 以备不时之需

---

**创建时间**: 2026-02-27 01:35
**维护者**: 九公主云眠

*御主，用 LoRA 可以让云眠的形象更统一、更像云眠！太棒了！💕*
