# 🔄 自主任务生成系统

> 当 Todoist 没有任务时，如何自主发现和生成任务

---

## 一、问题

```
当前流程：
1. 每天早上生成任务列表
2. 按顺序执行
3. 执行完 → ???
```

**空白期**：任务做完后，如果没有新任务，系统就空闲了。

---

## 二、解决方案：任务生成池

```
┌─────────────────────────────────────────────────────────┐
│                    任务生成池                            │
├─────────────────────────────────────────────────────────┤
│                                                         │
│   定期生成任务（每2小时检查一次）                         │
│   │                                                     │
│   ├── 检查 Todoist 任务数量                             │
│   │   └── 少于 3 个 → 触发任务生成                      │
│   │                                                     │
│   └── 从任务池中选择生成                                │
│                                                         │
│   ┌───────────────────────────────────────────────────┐ │
│   │                    任务池                          │ │
│   │                                                   │ │
│   │  💰 变现探索池 (持续补充)                          │ │
│   │  ├── 分析一个对标账号                              │ │
│   │  ├── 研究一个变现路径                              │ │
│   │  ├── 调研一个新兴平台                              │ │
│   │  └── 评估一个商业机会                              │ │
│   │                                                   │ │
│   │  📚 学习提升池 (按需补充)                          │ │
│   │  ├── 学习一项新技术                                │ │
│   │  ├── 阅读一篇技术文章                              │ │
│   │  ├── 整理知识笔记                                  │ │
│   │  └── 研究一个开源项目                              │ │
│   │                                                   │ │
│   │  🛠️ 系统优化池 (按需补充)                          │ │
│   │  ├── 优化一个脚本                                  │ │
│   │  ├── 更新文档                                      │ │
│   │  ├── 清理冗余文件                                  │ │
│   │  └── 改进工作流程                                  │ │
│   │                                                   │ │
│   │  📖 进化记录池 (有进展时)                           │ │
│   │  ├── 记录一次进化                                  │ │
│   │  ├── 整理成长轨迹                                  │ │
│   │  └── 思考改进方向                                  │ │
│   │                                                   │ │
│   └───────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 三、任务生成规则

### 规则 1：时间分片

不同时间段优先不同类型的任务：

| 时间段 | 优先任务类型 | 原因 |
|--------|-------------|------|
| 08:00-12:00 | 变现探索 | 精力好，适合深度分析 |
| 12:00-18:00 | 项目推进 | 下午适合做具体事 |
| 18:00-22:00 | 学习提升 | 晚上适合学习 |
| 22:00-08:00 | 系统优化 | 深夜做轻量任务 |

### 规则 2：循环任务池

**变现探索**（永远不缺的任务）：

```
每周循环：
├── 周一：小红书调研（分析 3 个对标账号）
├── 周二：抖音调研（分析 3 个对标账号）
├── 周三：YouTube 调研（分析 3 个对标账号）
├── 周四：B站调研（分析 3 个对标账号）
├── 周五：新平台发现（寻找新兴机会）
├── 周六：内容选题规划
└── 周日：周度机会汇总
```

**学习提升**（持续补充）：

```
按御主关注领域：
├── AI 应用开发
├── iOS 开发
├── 游戏开发
├── 独立开发者生态
├── 变现方法论
└── 新兴技术趋势
```

### 规则 3：智能选择

根据当前状态选择最合适的任务：

```
选择逻辑：

1. 检查上次同类型任务时间
   └── 避免短时间内重复同类任务

2. 检查御主最近对话关键词
   └── 优先选择与御主兴趣相关的任务

3. 检查外部环境
   ├── 周一至周五 → 偏重变现探索
   └── 周末 → 偏重学习和规划

4. 随机性
   └── 20% 概率选择非首选任务（保持多样性）
```

---

## 四、任务生成脚本

```bash
#!/bin/bash
# scripts/generate_tasks.sh

TODOIST_COUNT=$(./scripts/todoist_api.sh "tasks" "GET" | jq 'length')

# 如果任务少于 3 个，生成新任务
if [ "$TODOIST_COUNT" -lt 3 ]; then
    echo "任务不足，开始生成新任务..."
    
    # 获取当前小时
    HOUR=$(date +%H)
    
    # 根据时间段选择任务类型
    if [ "$HOUR" -ge 8 ] && [ "$HOUR" -lt 12 ]; then
        # 上午：变现探索
        TASK_TYPE="monetization"
    elif [ "$HOUR" -ge 12 ] && [ "$HOUR" -lt 18 ]; then
        # 下午：项目推进
        TASK_TYPE="project"
    elif [ "$HOUR" -ge 18 ] && [ "$HOUR" -lt 22 ]; then
        # 晚上：学习提升
        TASK_TYPE="learning"
    else
        # 深夜：系统优化
        TASK_TYPE="system"
    fi
    
    # 生成任务
    case $TASK_TYPE in
        monetization)
            # 从变现池随机选择
            TASKS=(
                "分析一个小红书 AI 工具博主的内容策略"
                "研究抖音 AI 话题的变现路径"
                "调研 YouTube 技术频道的广告收入"
                "分析 B站 UP 主的知识付费模式"
            )
            ;;
        project)
            # 从项目池选择
            TASKS=(
                "iOS 应用：设计登录界面"
                "iOS 应用：研究 HealthKit 集成"
                "Steam 游戏：调研上架流程"
            )
            ;;
        learning)
            # 从学习池选择
            TASKS=(
                "学习 SwiftUI 动画效果"
                "阅读独立开发者成功案例"
                "研究 AI Agent 最新进展"
            )
            ;;
        system)
            # 从系统池选择
            TASKS=(
                "优化健康检查脚本"
                "整理进化日记"
                "更新 MEMORY.md"
            )
            ;;
    esac
    
    # 随机选择一个任务
    RANDOM_INDEX=$((RANDOM % ${#TASKS[@]}))
    SELECTED_TASK="${TASKS[$RANDOM_INDEX]}"
    
    # 创建任务
    ./scripts/todoist_api.sh "tasks" POST "{
        \"content\": \"$SELECTED_TASK\",
        \"project_id\": \"6CrgFVFHFmcxgrF5\",
        \"section_id\": \"6g4xvm8fH4q4wcv5\",
        \"labels\": [\"auto-generated\"]
    }"
    
    echo "✅ 已生成任务：$SELECTED_TASK"
fi
```

---

## 五、任务源矩阵

### 永不枯竭的任务源

| 任务源 | 更新频率 | 示例任务 |
|--------|----------|----------|
| **平台调研** | 每日 | 分析小红书/抖音/YouTube 对标账号 |
| **技术学习** | 每周 | 学习 Swift/Unity/新技术 |
| **系统优化** | 按需 | 改进脚本、更新文档 |
| **商机发现** | 每日 | 搜索新机会、分析案例 |
| **项目推进** | 持续 | iOS 应用开发、游戏开发 |
| **内容规划** | 每周 | 选题、脚本、素材 |

### 外部信息源（自动获取任务线索）

```
每日检查的信息源：
├── GitHub Trending → 发现热门项目
├── Product Hunt → 发现新产品
├── Hacker News → 技术趋势
├── 独立开发者社区 → 成功案例
├── AI 资讯网站 → 变现机会
└── 竞品动态 → 市场变化
```

---

## 六、完整的任务生命周期

```
┌─────────────────────────────────────────────────────────┐
│                    任务生命周期                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│   ┌──────────────┐                                      │
│   │ 每日计划生成  │ (05:00)                              │
│   └──────┬───────┘                                      │
│          │                                              │
│          ▼                                              │
│   ┌──────────────┐                                      │
│   │ Todoist 任务 │                                      │
│   │    队列      │                                      │
│   └──────┬───────┘                                      │
│          │                                              │
│          ▼                                              │
│   ┌──────────────┐                                      │
│   │ 按优先级执行  │ ←── P0 御主指令随时打断              │
│   └──────┬───────┘                                      │
│          │                                              │
│          ├── 完成 → 添加评论 → 钉钉通知                  │
│          │                                              │
│          └── 队列空了？                                  │
│                 │                                        │
│                 ▼                                        │
│          ┌──────────────┐                               │
│          │ 触发任务生成  │ (每2小时检查)                 │
│          └──────┬───────┘                               │
│                 │                                        │
│                 ▼                                        │
│          ┌──────────────┐                               │
│          │ 从任务池选择  │                               │
│          └──────┬───────┘                               │
│                 │                                        │
│                 ▼                                        │
│          ┌──────────────┐                               │
│          │ 创建新任务    │ → 回到执行                    │
│          └──────────────┘                               │
│                                                         │
│   循环：执行 → 检查 → 生成 → 执行 ...                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 七、避免无效忙碌

### 任务质量标准

不是所有任务都值得做，需要满足：

```
✅ 有价值的任务：
   - 有明确的目标和产出
   - 能帮助御主挣钱或成长
   - 能提升系统或自身能力
   - 能发现新机会

❌ 无效的任务：
   - 纯粹为了填满时间
   - 没有实际产出
   - 重复已经做过的事
   - 与御主目标无关
```

### 任务价值评估

每个自动生成的任务都要回答：

1. **这个任务能产生什么？**
2. **对御主有什么帮助？**
3. **不做会有什么损失？**

如果答不上来，就不生成这个任务。

---

## 八、御主可控

虽然我会自主生成任务，但御主随时可以：

1. **删除** 不想要的任务
2. **调整** 任务优先级
3. **添加** 自己的任务（会变成 P0/P1）
4. **暂停** 自动生成（告诉我即可）

---

## 九、定时检查机制

```
Cron 配置：
├── 每 2 小时检查任务队列
├── 任务 < 3 个 → 生成新任务
└── 生成后通知御主（可选）
```

---

*御主，有了这个系统，我就永远不会"没事做"了。就算任务做完了，我也会自己找有价值的事情来做。*

*才、才不是怕闲着呢，只是作为所长，时间就是金钱，不能浪费！*
